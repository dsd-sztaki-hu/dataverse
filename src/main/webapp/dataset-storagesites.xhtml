<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:jsf="http://xmlns.jcp.org/jsf">

    <div class="text-right margin-bottom" 
         jsf:rendered="#{dataverseSession.user.authenticated and empty editMode and !widgetWrapper.widgetView
                         and permissionsWrapper.canIssueUpdateDatasetCommand(DatasetPage.dataset)}">
        <p:commandLink styleClass="btn btn-default btn-access" actionListener="#{DatasetPage.edit('storagesites')}" 
                       update="@form,:messagePanel" disabled="#{DatasetPage.lockedFromEdits}">
            <f:setPropertyActionListener target="#{DatasetPage.selectedTabIndex}" value="0" />
            <span class="glyphicon glyphicon-briefcase"/> #{bundle['file.dataFilesTab.storagesites.editBtn']}
        </p:commandLink>
    </div>
    <div class="panel-group">
       <div class="panel panel-default">
           <div data-toggle="collapse" data-target="#panelCollapseTOU" class="panel-heading text-info">
               #{bundle['file.dataFilesTab.storagesites.list.header']} &#160;<span class="glyphicon glyphicon-chevron-up"/>
           </div>
           <div id="panelCollapseTOU" class="collapse in">
               <p:fragment id="touFragment">
                   <o:importFunctions type="edu.harvard.iq.dataverse.util.MarkupChecker"/>
                   <o:importFunctions type="org.apache.commons.text.StringEscapeUtils" />
                   <o:importFunctions type="edu.harvard.iq.dataverse.dataset.DatasetUtil" />
                   <div class="panel-body">
                       <div class="form-group">
                           <label for="datasetForm:tabView:storagesites" class="col-sm-3 control-label">
                               #{bundle['file.dataFilesTab.storagesites.list']}
                           </label>
                           <div class="col-sm-9">
                               <ui:fragment rendered="#{empty editMode}">
                                   <p class="help-block">
                                       <h:outputText value="#{bundle['file.dataFilesTab.storagesites.list.description']}" escape="false"/>
                                   </p>
                               </ui:fragment>
                           </div>
                           <div class="form-group" jsf:rendered="#{!empty storagesites}">
                                <label for="datasetForm:tabView:storagesites" class="col-sm-3 control-label">
                                    #{bundle['file.dataFilesTab.storagesites.list.status']}
                                    <span class="glyphicon glyphicon-question-sign tooltip-icon"
                                          data-toggle="tooltip" data-placement="auto right" data-original-title="#{bundle['file.dataFilesTab.storagesites.list.status.title']}"></span>
                                </label>
                                <p:selectBooleanCheckbox id="requestTransfer" itemLabel="#{bundle['file.dataFilesTab.storagesites.list.requestTransfer.btn']}" 
                                                        value="#{storagesites.transferRequested}" disabled="#{datasetPage == true and !DatasetPage.hasFiles}">
                                   <p:ajax event="change" update="requestTransferHelp" />
                                </p:selectBooleanCheckbox>                                                          
                                <p:selectBooleanCheckbox id="requestTransfer" itemLabel="#{bundle['file.dataFilesTab.storagesites.list.requestDelete.btn']}" 
                                                        value="#{storagesites.deleteRequested}" disabled="#{datasetPage == true and !DatasetPage.hasFiles}">
                                   <p:ajax event="change" update="requestDeleteHelp" />
                                </p:selectBooleanCheckbox>                                                          
                            </div>
                       </div>

                    </div>
                </p:fragment>
            </div>
        </div>

    </div>
</ui:composition>
